!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.timeago=t()}(this,function(){"use strict";var e="second_minute_hour_day_week_month_year".split("_"),t="秒_分钟_小时_天_周_月_年".split("_"),n=[60,60,24,7,365/7/12,12],r={en:function(t,n){if(0===n)return["just now","right now"];var r=e[parseInt(n/2)];return t>1&&(r+="s"),[t+" "+r+" ago","in "+t+" "+r]},zh_CN:function(e,n){if(0===n)return["刚刚","片刻后"];var r=t[parseInt(n/2)];return[e+" "+r+"前",e+" "+r+"后"]}},a=function(e){return parseInt(e)},i=function(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(a(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(a(e))},o=function(e,t,i){t=r[t]?t:r[i]?i:"en";for(var o=0,u=e<0?1:0,c=e=Math.abs(e);e>=n[o]&&o<n.length;o++)e/=n[o];return(e=a(e))>(0===(o*=2)?9:1)&&(o+=1),r[t](e,o,c)[u].replace("%s",e)},u=function(e,t){return((t=t?i(t):new Date)-i(e))/1e3},c=function(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0},f=[],l=function(e){e&&(clearTimeout(e),delete f[e])},d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.nowDate=t,this.defaultLocale=n}return d(e,[{key:"setLocale",value:function(e){this.defaultLocale=e}},{key:"doRender",value:function(e,t,r){var a=this,i=u(t,this.nowDate);e.innerHTML=o(i,r,this.defaultLocale);var c=function(e,t){var n=setTimeout(function(){e(),l(n)},t);return f[n]=0,n}(function(){a.doRender(e,t,r)},Math.min(1e3*function(e){for(var t=1,r=0,a=Math.abs(e);e>=n[r]&&r<n.length;r++)e/=n[r],t*=n[r];return a=(a%=t)?t-a:t,Math.ceil(a)}(i),2147483647));!function(e,t){e.setAttribute?e.setAttribute("data-tid",t):e.attr&&e.attr("data-tid",t)}(e,c)}},{key:"render",value:function(e,t){void 0===e.length&&(e=[e]);for(var n=0,r=e.length;n<r;n++)this.doRender(e[n],(a=e[n],c(a,"data-timeago")||c(a,"datetime")),t);var a}},{key:"format",value:function(e,t){return o(u(e,this.nowDate),t,this.defaultLocale)}}]),e}(),h=function(e,t){return new s(e,t)};return h.register=function(e,t){r[e]=t},h.cancel=function(e){if(e)l(c(e,"data-tid"));else for(var t in f)l(t)},h});
