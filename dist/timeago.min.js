!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):e.timeago=t()}(this,function(){"use strict";var e=[60,60,24,7,365/7/12,12],t=function(e){return parseInt(e)},n=function(e){return e instanceof Date?e:isNaN(e)?/^\d+$/.test(e)?new Date(t(e)):(e=(e||"").trim().replace(/\.\d+/,"").replace(/-/,"/").replace(/-/,"/").replace(/(\d)T(\d)/,"$1 $2").replace(/Z/," UTC").replace(/([\+\-]\d\d)\:?(\d\d)/," $1$2"),new Date(e)):new Date(t(e))},r=[],a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var o=function(){function o(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"en";!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,o),this.nowDate=e,this.defaultLocale=t}return a(o,[{key:"setLocale",value:function(e){this.defaultLocale=e}},{key:"doRender",value:function(t,n,a){var o=this;t.innerHTML=this.format(n,a);var i=function(e,t){var n=setTimeout(function(){e(),delete r[n]},t);return r[n]=0,n}(function(){o.doRender(t,n,a)},Math.min(1e3*function(t){for(var n=1,r=0,a=Math.abs(t);t>=e[r]&&r<e.length;r++)t/=e[r],n*=e[r];return a=(a%=n)?n-a:n,Math.ceil(a)}(diff),2147483647));!function(e,t){(e.setAttribute?e.setAttribute:e.attr?e.attr:function(){})(ATTR_DATA_TID,t)}(t,i)}},{key:"render",value:function(e,t){var n=Array.isArray(e)?e:[e],r=!0,a=!1,o=void 0;try{for(var i,u=n[Symbol.iterator]();!(r=(i=u.next()).done);r=!0){var c=i.value;this.doRender(c,getDateAttr(c),t)}}catch(e){a=!0,o=e}finally{try{!r&&u.return&&u.return()}finally{if(a)throw o}}}},{key:"format",value:function(r,a){return function(n,r,a){r=locales[r]?r:locales[a]?a:"en";for(var o=0,i=n<0?1:0,u=n=Math.abs(n);n>=e[o]&&o<e.length;o++)n/=e[o];return(n=t(n))>(0==(o*=2)?9:1)&&(o+=1),locales[r](n,o,u)[i].replace("%s",n)}(function(e,t){return((t=t?n(t):new Date)-n(e))/1e3}(r,this.nowDate),a,this.defaultLocale)}}]),o}(),i=function(e,t){return new o(e,t)};return i.register=function(e,t){},i.cancel=function(e){var t=void 0;if(e)(t=function(e,t){return e.getAttribute?e.getAttribute(t):e.attr?e.attr(t):void 0}(e,"data-tid"))&&(clearTimeout(t),delete r[t]);else{for(t in r)clearTimeout(t);timers={}}},module.exports=exports.default,i});
